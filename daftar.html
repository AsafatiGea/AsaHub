<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar - AsaHub</title>
    <link rel="icon" type="image/png" href="img/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="form-page">
    <div class="form-box" style="max-width: 520px;">
        <div class="form-logo">
            <a href="index.html" class="nav-logo" style="font-size:26px;">Asa<span>Hub</span></a>
        </div>
        <h2>Buat Akun Baru</h2>
        <p class="form-sub">Gratis, tidak ada biaya pendaftaran</p>

        <div class="alert alert-error" id="alertError"></div>
        <div class="alert alert-success" id="alertSuccess">Akun berhasil dibuat! Mengarahkan ke login...</div>

        <div class="form-group">
            <label>Nama Lengkap</label>
            <input type="text" id="name" placeholder="Nama kamu">
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="email" id="email" placeholder="nama@email.com">
        </div>
        <div class="form-group">
            <label>No. Telepon / WhatsApp</label>
            <input type="tel" id="phone" placeholder="0812-xxxx-xxxx">
        </div>
        <div class="form-group">
            <label>Daftar sebagai</label>
            <select id="role">
                <option value="pembeli">Pembeli</option>
                <option value="penjual">Penjual / Merchant</option>
                <option value="penyedia_jasa">Penyedia Jasa</option>
            </select>
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" id="password" placeholder="Min. 6 karakter">
        </div>
        <div class="form-group">
            <label>Konfirmasi Password</label>
            <input type="password" id="confirm" placeholder="Ulangi password">
        </div>

        <div style="font-size:13px; color: var(--muted); margin-bottom: 16px;">
            Dengan mendaftar, kamu setuju dengan <a href="tentang.html" style="color:var(--blue-light);">Syarat & Ketentuan</a> AsaHub.
        </div>

        <button class="form-btn" onclick="doRegister()">Buat Akun</button>

        <div class="form-footer" style="margin-top:16px;">
            Sudah punya akun? <a href="login.html">Masuk di sini</a>
        </div>
        <div class="form-footer" style="margin-top:8px;">
            <a href="index.html">‚Üê Kembali ke Marketplace</a>
        </div>
    </div>
</div>

<script>
function doRegister() {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const role = document.getElementById('role').value;
    const password = document.getElementById('password').value;
    const confirm = document.getElementById('confirm').value;
    const errEl = document.getElementById('alertError');
    const okEl = document.getElementById('alertSuccess');

    errEl.classList.remove('show');
    okEl.classList.remove('show');

    if (!name || !email || !phone || !password) {
        errEl.textContent = 'Semua kolom harus diisi.';
        errEl.classList.add('show'); return;
    }
    if (password.length < 6) {
        errEl.textContent = 'Password minimal 6 karakter.';
        errEl.classList.add('show'); return;
    }
    if (password !== confirm) {
        errEl.textContent = 'Password tidak cocok.';
        errEl.classList.add('show'); return;
    }

    const users = JSON.parse(localStorage.getItem('asahub_users') || '[]');
    if (users.find(u => u.email === email)) {
        errEl.textContent = 'Email sudah terdaftar.';
        errEl.classList.add('show'); return;
    }

    const newUser = { name, email, phone, role, password, joinDate: new Date().toLocaleDateString('id-ID') };
    users.push(newUser);
    localStorage.setItem('asahub_users', JSON.stringify(users));

    okEl.classList.add('show');
    setTimeout(() => { window.location.href = 'login.html'; }, 1500);
}
</script>
</body>
</html>