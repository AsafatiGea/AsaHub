<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AsaHub - Marketplace</title>
    <link rel="icon" type="image/png" href="img/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="navbar">
    <a href="index.html" class="nav-logo">Asa<span>Hub</span></a>
    <div class="nav-links">
        <a href="index.html" style="color:var(--blue); font-weight:700;">Marketplace</a>
        <a href="jasa.html">Jasa</a>
        <a href="edukasi.html">Edukasi</a>
        <a href="tentang.html">Tentang</a>
    </div>
    <div class="nav-auth" id="navAuth">
        <a href="login.html" class="btn-outline">Masuk</a>
        <a href="daftar.html" class="btn-solid">Daftar</a>
    </div>
    <button class="hamburger" onclick="toggleMenu()">â˜°</button>
</nav>

<div class="mobile-menu" id="mobileMenu">
    <a href="index.html" onclick="toggleMenu()">Marketplace</a>
    <a href="jasa.html" onclick="toggleMenu()">Jasa</a>
    <a href="edukasi.html" onclick="toggleMenu()">Edukasi</a>
    <a href="tentang.html" onclick="toggleMenu()">Tentang</a>
    <a href="login.html" onclick="toggleMenu()">Masuk</a>
    <a href="daftar.html" onclick="toggleMenu()">Daftar</a>
    <a href="dasboard.html" onclick="toggleMenu()" id="mobileDashboard" style="display:none;">Dashboard</a>
</div>

<div class="page-header">
    <h1>Marketplace AsaHub</h1>
    <p>Temukan ribuan produk dari penjual terpercaya di seluruh Indonesia</p>
</div>

<div class="marketplace-layout">
    <aside class="sidebar">
        <div class="sidebar-box">
            <h3>Kategori</h3>
            <div class="filter-item"><input type="checkbox" id="f1" checked onchange="filterProducts()"><label for="f1">Semua</label></div>
            <div class="filter-item"><input type="checkbox" id="f2" onchange="filterProducts()"><label for="f2">ğŸ‘• Fashion</label></div>
            <div class="filter-item"><input type="checkbox" id="f3" onchange="filterProducts()"><label for="f3">â˜• Makanan & Minuman</label></div>
            <div class="filter-item"><input type="checkbox" id="f4" onchange="filterProducts()"><label for="f4">ğŸš— Otomotif</label></div>
            <div class="filter-item"><input type="checkbox" id="f5" onchange="filterProducts()"><label for="f5">ğŸ“± Elektronik</label></div>
            <div class="filter-item"><input type="checkbox" id="f6" onchange="filterProducts()"><label for="f6">ğŸ Kerajinan</label></div>
        </div>
        <div class="sidebar-box">
            <h3>Rentang Harga</h3>
            <div class="form-group">
                <label>Min (Rp)</label>
                <input type="number" id="priceMin" placeholder="0" oninput="filterProducts()" style="font-size:13px; padding: 8px 12px;">
            </div>
            <div class="form-group">
                <label>Max (Rp)</label>
                <input type="number" id="priceMax" placeholder="10.000.000" oninput="filterProducts()" style="font-size:13px; padding: 8px 12px;">
            </div>
        </div>
        <a href="dasboard.html" class="btn-solid" style="display:block; text-align:center;">+ Jual Produk</a>
    </aside>

    <div class="products-area">
        <div class="products-toolbar">
            <span id="produkCount">Menampilkan semua produk</span>
            <div class="search-bar">
                <span>ğŸ”</span>
                <input type="text" placeholder="Cari produk..." id="searchInput" oninput="filterProducts()">
            </div>
        </div>
        <div class="products-grid" id="productsGrid"></div>
    </div>
</div>

<div class="modal-overlay" id="modalDetail">
    <div class="modal">
        <button class="modal-close" onclick="closeModal('modalDetail')">âœ•</button>
        <div style="text-align:center; font-size: 64px; margin-bottom: 16px;" id="detailEmoji">ğŸ“¦</div>
        <h3 id="detailNama">-</h3>
        <p style="font-size:13px; color:var(--muted); margin-bottom: 4px;" id="detailKategori">-</p>
        <p style="font-family:'Syne',sans-serif; font-size:26px; font-weight:800; color:var(--blue); margin: 12px 0;" id="detailHarga">-</p>
        <p style="font-size:14px; color:var(--muted); margin-bottom: 16px;" id="detailDeskripsi">-</p>
        <div style="font-size:13px; color:var(--muted); margin-bottom: 20px;">
            ğŸ‘¤ Dijual oleh: <strong id="detailPenjual">-</strong> Â· Stok: <strong id="detailStok">-</strong>
        </div>
        <div id="detailRekening" style="background:var(--bg); border-radius:10px; padding:14px; margin-bottom:20px; font-size:14px;"></div>
        <a href="https://wa.me/6282165713526" id="btnBeli" target="_blank" class="form-btn" style="display:block; text-align:center; text-decoration:none; color:white;">
            ğŸ’¬ Hubungi Penjual via WhatsApp
        </a>
    </div>
</div>

<footer class="footer">
    <div class="footer-top">
        <div class="footer-brand">
            <div class="nav-logo" style="font-size:24px;">Asa<span>Hub</span></div>
            <p>Pusat Harapan â€” Menyatukan individu dan brand dalam ekosistem bisnis yang stabil dan berkembang.</p>
        </div>
        <div class="footer-links">
            <div class="footer-col">
                <h4>Platform</h4>
                <a href="index.html">Marketplace</a>
                <a href="jasa.html">Jasa & Kerja</a>
                <a href="edukasi.html">Edukasi</a>
            </div>
            <div class="footer-col">
                <h4>Akun</h4>
                <a href="daftar.html">Daftar Penjual</a>
                <a href="login.html">Masuk</a>
                <a href="dasboard.html">Dashboard</a>
            </div>
            <div class="footer-col">
                <h4>AsaHub</h4>
                <a href="tentang.html">Tentang Kami</a>
                <a href="#">Kontak</a>
                <a href="#">Kebijakan Privasi</a>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>Â© 2026 AsaHub Â· asahub.site Â· Dibuat dengan â¤ï¸ oleh Asafati Gea</p>
    </div>
</footer>

<script>
function toggleMenu() { document.getElementById('mobileMenu').classList.toggle('open'); }
function closeModal(id) { document.getElementById(id).classList.remove('open'); }
document.getElementById('modalDetail').addEventListener('click', function(e) {
    if (e.target === this) closeModal('modalDetail');
});

var user = JSON.parse(localStorage.getItem('asahub_current_user') || 'null');
if (user) {
    document.getElementById('navAuth').innerHTML = '<a href="dasboard.html" class="btn-solid">Dashboard</a>';
    var ml = document.querySelectorAll('#mobileMenu a[href="login.html"], #mobileMenu a[href="daftar.html"]');
    ml.forEach(function(a) { a.style.display = 'none'; });
    var md = document.getElementById('mobileDashboard');
    if (md) md.style.display = 'block';
}

var defaultProducts = [
    { id: 1, nama: 'Kemeja Batik Nias', harga: 120000, stok: 10, kategori: 'Fashion', emoji: 'ğŸ‘•', penjual: 'Toko Asafati', email: 'demo@asahub.site', deskripsi: 'Kemeja batik motif khas Nias, bahan katun premium, tersedia berbagai ukuran.' },
    { id: 2, nama: 'Kopi Nias Premium', harga: 75000, stok: 50, kategori: 'Makanan & Minuman', emoji: 'â˜•', penjual: 'Toko Asafati', email: 'demo@asahub.site', deskripsi: 'Kopi arabika pilihan dari dataran tinggi Nias, diproses dengan metode honey.' },
    { id: 3, nama: 'Tas Rotan Anyaman', harga: 255000, stok: 5, kategori: 'Kerajinan', emoji: 'ğŸ', penjual: 'Kerajinan Nusantara', email: 'nusantara@asahub.site', deskripsi: 'Tas rotan anyaman tangan, kuat dan estetis. Cocok untuk kasual maupun formal.' },
    { id: 4, nama: 'Minyak Kelapa Murni', harga: 45000, stok: 30, kategori: 'Makanan & Minuman', emoji: 'ğŸ±', penjual: 'UMKM Nias Barat', email: 'nias@asahub.site', deskripsi: 'Minyak kelapa murni cold-pressed, tanpa bahan kimia.' },
    { id: 5, nama: 'Aksesori HP Lokal', harga: 35000, stok: 100, kategori: 'Elektronik', emoji: 'ğŸ“±', penjual: 'TechHub Store', email: 'tech@asahub.site', deskripsi: 'Case, charger, dan aksesori smartphone berbagai merk.' },
    { id: 6, nama: 'Sarung Tenun NTT', harga: 185000, stok: 8, kategori: 'Fashion', emoji: 'ğŸ‘•', penjual: 'Tenun Nusantara', email: 'tenun@asahub.site', deskripsi: 'Sarung tenun tangan motif NTT, kualitas premium.' },
];

function getAllProducts() {
    var market = JSON.parse(localStorage.getItem('asahub_marketplace') || '[]');
    return defaultProducts.concat(market);
}

var allProducts = getAllProducts();

function renderProducts(list) {
    var grid = document.getElementById('productsGrid');
    document.getElementById('produkCount').textContent = 'Menampilkan ' + list.length + ' produk';
    if (!list.length) {
        grid.innerHTML = '<p style="color:var(--muted); grid-column:1/-1; text-align:center; padding:60px 0;">Tidak ada produk yang sesuai.</p>';
        return;
    }
    grid.innerHTML = list.map(function(p) {
        return '<div class="product-card" onclick="showDetail(' + p.id + ')">' +
            '<div class="product-img">' + p.emoji + '</div>' +
            '<div class="product-info">' +
            '<h4>' + p.nama + '</h4>' +
            '<div class="product-seller">oleh ' + p.penjual + '</div>' +
            '<div class="product-price">Rp ' + p.harga.toLocaleString('id-ID') + '</div>' +
            '<button class="btn-solid" onclick="event.stopPropagation(); showDetail(' + p.id + ')">Lihat Detail</button>' +
            '</div></div>';
    }).join('');
}

function filterProducts() {
    var search = document.getElementById('searchInput').value.toLowerCase();
    var min = parseInt(document.getElementById('priceMin').value, 10) || 0;
    var max = parseInt(document.getElementById('priceMax').value, 10) || 999999999;
    allProducts = getAllProducts();
    var filtered = allProducts.filter(function(p) {
        var matchSearch = p.nama.toLowerCase().indexOf(search) !== -1 || p.penjual.toLowerCase().indexOf(search) !== -1;
        var matchPrice = p.harga >= min && p.harga <= max;
        return matchSearch && matchPrice;
    });
    renderProducts(filtered);
}

function showDetail(id) {
    var p = getAllProducts().find(function(x) { return x.id === id; });
    if (!p) return;
    document.getElementById('detailEmoji').textContent = p.emoji;
    document.getElementById('detailNama').textContent = p.nama;
    document.getElementById('detailKategori').textContent = p.kategori;
    document.getElementById('detailHarga').textContent = 'Rp ' + p.harga.toLocaleString('id-ID');
    document.getElementById('detailDeskripsi').textContent = p.deskripsi || 'Tidak ada deskripsi.';
    document.getElementById('detailPenjual').textContent = p.penjual;
    document.getElementById('detailStok').textContent = p.stok;
    var rek = JSON.parse(localStorage.getItem('asahub_rekening_' + p.email) || '[]');
    var rekEl = document.getElementById('detailRekening');
    if (rek.length) {
        rekEl.innerHTML = '<strong>ğŸ’³ Cara Bayar:</strong><br>' + rek.map(function(r) { return 'ğŸ¦ ' + r.jenis + ' Â· ' + r.nomor + ' Â· a.n. ' + r.nama; }).join('<br>');
    } else {
        rekEl.innerHTML = 'ğŸ’¬ Hubungi penjual untuk info pembayaran.';
    }
    var waText = encodeURIComponent('Halo, saya tertarik dengan produk: ' + p.nama + '\n\n*' + p.nama + '* - Rp ' + p.harga.toLocaleString('id-ID'));
    document.getElementById('btnBeli').href = 'https://wa.me/6282165713526?text=' + waText;
    document.getElementById('modalDetail').classList.add('open');
}

renderProducts(allProducts);
</script>
</body>
</html>
