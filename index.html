<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AsaHub - Marketplace</title>
    <link rel="icon" type="image/png" href="img/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<nav class="navbar">
    <a href="index.html" class="nav-logo">Asa<span>Hub</span></a>
    <div class="nav-links">
        <a href="index.html" style="color:var(--primary); font-weight:700;">Marketplace</a>
        <a href="jasa.html">Jasa</a>
        <a href="edukasi.html">Edukasi</a>
        <a href="tentang.html" style="color:var(--primary-light);">Tentang</a>
    </div>
    <div class="nav-auth" id="navAuth">
        <a href="login.html" class="btn-outline">Masuk</a>
        <a href="daftar.html" class="btn-solid">Daftar</a>
    </div>
    <button class="hamburger" onclick="toggleMenu()" aria-label="Buka menu">â˜°</button>
</nav>

<div class="mobile-menu" id="mobileMenu">
    <a href="index.html" onclick="toggleMenu()">Marketplace</a>
    <a href="jasa.html" onclick="toggleMenu()">Jasa</a>
    <a href="edukasi.html" onclick="toggleMenu()">Edukasi</a>
    <a href="tentang.html" onclick="toggleMenu()">Tentang</a>
    <a href="login.html" onclick="toggleMenu()">Masuk</a>
    <a href="daftar.html" onclick="toggleMenu()">Daftar</a>
    <a href="dasboard.html" onclick="toggleMenu()" id="mobileDashboard" style="display:none;">Dashboard</a>
</div>

<div class="page-header">
    <h1>Marketplace AsaHub</h1>
    <p>Temukan ribuan produk dari penjual terpercaya di seluruh Indonesia</p>
</div>

<!-- Mobile Layout (Hidden on Desktop) -->
<div class="mobile-layout">
    <!-- Mobile Search Bar -->
    <div class="mobile-search-container">
        <div class="mobile-search-bar">
            <span class="search-icon">ğŸ”</span>
            <input type="text" placeholder="Cari produk di AsaHub..." id="mobileSearchInput">
        </div>
    </div>

    <!-- Mobile Categories -->
    <div class="mobile-categories">
        <div class="category-item" onclick="marketplaceManager.filterByCategory('all')">
            <div class="category-icon">ğŸ“¦</div>
            <span>Semua</span>
        </div>
        <div class="category-item" onclick="marketplaceManager.filterByCategory('Fashion')">
            <div class="category-icon">ğŸ‘•</div>
            <span>Fashion</span>
        </div>
        <div class="category-item" onclick="marketplaceManager.filterByCategory('Makanan & Minuman')">
            <div class="category-icon">â˜•</div>
            <span>Makanan</span>
        </div>
        <div class="category-item" onclick="marketplaceManager.filterByCategory('Elektronik')">
            <div class="category-icon">ğŸ“±</div>
            <span>Elektronik</span>
        </div>
        <div class="category-item" onclick="marketplaceManager.filterByCategory('Kerajinan')">
            <div class="category-icon">ğŸ</div>
            <span>Kerajinan</span>
        </div>
    </div>

    <!-- Flash Sale Section -->
    <div class="mobile-flash-sale">
        <div class="flash-sale-header">
            <div class="flash-title">
                <span class="flash-icon">âš¡</span>
                <span>Flash Sale</span>
            </div>
            <div class="flash-timer">
                <span id="flashHours">02</span>:<span id="flashMinutes">45</span>:<span id="flashSeconds">30</span>
            </div>
        </div>
        <div class="flash-products" id="flashProducts">
            <!-- Flash sale products will be inserted here -->
        </div>
    </div>

    <!-- Mobile Products Grid -->
    <div class="mobile-products-container">
        <div class="mobile-products-header">
            <h2>Produk Terlaris</h2>
            <span class="product-count" id="mobileProductCount">0 produk</span>
        </div>
        <div class="mobile-products-grid" id="mobileProductsGrid">
            <!-- Products will be inserted here -->
        </div>
    </div>
</div>

<!-- Desktop Layout (Hidden on Mobile) -->
<div class="marketplace-layout">
    <aside class="sidebar">
        <div class="sidebar-box">
            <h3>Kategori</h3>
            <div class="filter-item">
                <input type="radio" id="f1" name="category" checked onchange="marketplaceManager.filterByCategory('all')">
                <label for="f1">Semua</label>
            </div>
            <div class="filter-item">
                <input type="radio" id="f2" name="category" onchange="marketplaceManager.filterByCategory('Fashion')">
                <label for="f2">ğŸ‘• Fashion</label>
            </div>
            <div class="filter-item">
                <input type="radio" id="f3" name="category" onchange="marketplaceManager.filterByCategory('Makanan & Minuman')">
                <label for="f3">â˜• Makanan & Minuman</label>
            </div>
            <div class="filter-item">
                <input type="radio" id="f4" name="category" onchange="marketplaceManager.filterByCategory('Otomotif')">
                <label for="f4">ğŸš— Otomotif</label>
            </div>
            <div class="filter-item">
                <input type="radio" id="f5" name="category" onchange="marketplaceManager.filterByCategory('Elektronik')">
                <label for="f5">ğŸ“± Elektronik</label>
            </div>
            <div class="filter-item">
                <input type="radio" id="f6" name="category" onchange="marketplaceManager.filterByCategory('Kerajinan')">
                <label for="f6">ğŸ Kerajinan</label>
            </div>
        </div>
        <div class="sidebar-box">
            <h3>Rentang Harga</h3>
            <div class="form-group">
                <label>Min (Rp)</label>
                <input type="number" id="priceMin" placeholder="0" oninput="marketplaceManager.filterProducts()" style="font-size:13px; padding: 8px 12px;">
            </div>
            <div class="form-group">
                <label>Max (Rp)</label>
                <input type="number" id="priceMax" placeholder="10.000.000" oninput="marketplaceManager.filterProducts()" style="font-size:13px; padding: 8px 12px;">
            </div>
        </div>
        <a href="dasboard.html" class="btn-solid" style="display:block; text-align:center;">+ Jual Produk</a>
    </aside>

    <main class="main-content">
        <div class="content-header">
            <h2 id="pageTitle">Marketplace</h2>
            <span id="produkCount">Menampilkan semua produk</span>
            <div class="search-bar">
                <span>ğŸ”</span>
                <input type="text" placeholder="Cari produk..." id="searchInput">
            </div>
        </div>
        <div class="products-grid" id="productsGrid">
            <!-- Products will be inserted here -->
        </div>
    </main>
</div>

<!-- Mobile Bottom Navigation -->
<div class="mobile-bottom-nav">
    <a href="index.html" class="nav-item active">
        <div class="nav-icon">ğŸ </div>
        <span>Home</span>
    </a>
    <a href="#" class="nav-item" onclick="showCategories()">
        <div class="nav-icon">ğŸ—‚ï¸</div>
        <span>Kategori</span>
    </a>
    <a href="#" class="nav-item" onclick="showCart()">
        <div class="nav-icon">ğŸ›’</div>
        <span>Keranjang</span>
        <div class="cart-badge" id="cartBadge">0</div>
    </a>
    <a href="#" class="nav-item" onclick="window.location.href='login.html'">
        <div class="nav-icon">ğŸ‘¤</div>
        <span>Akun</span>
    </a>
</div>

<!-- Product Detail Modal -->
<div class="modal-overlay" id="modalDetail">
    <div class="modal">
        <button class="modal-close" onclick="document.getElementById('modalDetail').classList.remove('open')">âœ•</button>
        <div style="text-align:center; font-size: 64px; margin-bottom: 16px;" id="detailEmoji">ğŸ“¦</div>
        <h3 id="detailNama">-</h3>
        <p style="font-size:13px; color:var(--muted); margin-bottom: 4px;" id="detailKategori">-</p>
        <p style="font-family:'Syne',sans-serif; font-size:26px; font-weight:800; color:var(--primary); margin: 12px 0;" id="detailHarga">-</p>
        <p style="font-size:14px; color:var(--muted); margin-bottom: 16px;" id="detailDeskripsi">-</p>
        <div style="font-size:13px; color:var(--muted); margin-bottom: 20px;">
            ğŸ‘¤ Dijual oleh: <strong id="detailPenjual">-</strong> Â· Stok: <strong id="detailStok">-</strong>
        </div>
        <div id="rekProduk" style="margin-bottom:20px;"></div>
        <a href="https://wa.me/6282165713526" id="btnBeli" target="_blank" class="form-btn" style="display:block; text-align:center; text-decoration:none; color:white;">ğŸ’¬ Hubungi Penjual</a>
    </div>
</div>

<!-- Scripts -->
<script src="js/supabase.js"></script>
<script src="js/auth.js"></script>
<script src="js/marketplace.js"></script>

<script>
// Flash Sale Timer
function startFlashSaleTimer() {
    let hours = 2;
    let minutes = 45;
    let seconds = 30;
    setInterval(() => {
        seconds--;
        if (seconds < 0) {
            seconds = 59;
            minutes--;
            if (minutes < 0) {
                minutes = 59;
                hours--;
                if (hours < 0) {
                    hours = 23;
                }
            }
        }
        document.getElementById('flashHours').textContent = String(hours).padStart(2, '0');
        document.getElementById('flashMinutes').textContent = String(minutes).padStart(2, '0');
        document.getElementById('flashSeconds').textContent = String(seconds).padStart(2, '0');
    }, 1000);
}

// Helper functions
function showCategories() {
    document.querySelector('.mobile-categories').scrollIntoView({ behavior: 'smooth' });
}

function showCart() {
    alert('Keranjang belanja Anda kosong');
}

// Initialize flash sale timer
document.addEventListener('DOMContentLoaded', () => {
    startFlashSaleTimer();
});
</script>

</body>
</html>
